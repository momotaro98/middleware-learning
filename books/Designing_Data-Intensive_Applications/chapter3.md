# Chapter 3

ストレージと抽出

*自分のアプリに適したエンジンを選択できないといけない*

はじめに扱う2つのエンジン

* **log-structured**ストレージエンジン
* **ページ指向**のストレージエンジン (Bツリーなど)

-----

## 3.1 データベースを駆動するデータ構造

"インデックスを追加するとクエリが改善されるが書き込みが遅くなる"

これは、ストレージシステムにおける重要なトレードオフである。

-----

### 3.1.1 ハッシュインデックス

- データストレージではファイルへの**追記だけ**を行う
- インメモリのハッシュマップ中には、すべてのキーに対してデータファイル中のバイトオフセットをマッピングする。
- すべてのキーが利用可能なRAMに収まっている必要がある。

【課題】追記されディスクを使い切らないようにどうするか

---

TODO: 図

---

コンパクション処理をする。

---